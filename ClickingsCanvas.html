<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>ClickingsCanvas.html &copy; Kari Laitinen</title>
<script type="text/javascript">

var clicked_point_x = -1 ; 
var clicked_point_y = -1 ;
var text_to_show = "";
function on_mouse_down( event )
{
   clicked_point_x = event.offsetX;
   clicked_point_y = event.offsetY;
   if ( clicked_point_x < 300 )
   {
      if ( clicked_point_y < 250) 
      {
         text_to_show = "North-West";
      }else{
         text_to_show = "South-West";
      }
   }else{
      if ( clicked_point_y < 250) 
      {
         text_to_show = "North-East";
      }else{
         text_to_show = "South-East";
      }
   }
   draw_on_canvas() ;   // This call updates the screen.
}

function draw_on_canvas()
{
   var canvas = document.getElementById( "canvas_for_clickings" ) ;
   var context = canvas.getContext("2d") ;

   // We'll fill the entire canvas with light color.

   context.fillStyle = "LightYellow" ;
   context.fillRect( 0, 0, canvas.width, canvas.height ) ;

   context.fillStyle = "Blue" ; 

   // The following loop draws all the clicked points each
   // time this function is called.

   context.beginPath() ;
   context.arc( clicked_point_x,
                  clicked_point_y,
                  3, 0, 2 * Math.PI, true ) ;
   context.closePath() ;
   context.fill() ;

   context.fillText(
         text_to_show,
         clicked_point_x + 7,
         clicked_point_y ) ;
   
}
</script>

<style type="text/css">

   #centered
   {
      width: 600px;
      height: 500px;
      margin: 30px auto;    /* top and bottom margins are 30p;
                               right and left margins are automatic */
      border: 1px solid black;
   }

</style>
</head>

<body onload="draw_on_canvas()">

   <div id=centered>

      <!-- We'll specify a canvas so that method on_mouse_down() will be
           called when onmousedown event takes place within the canvas area -->

      <canvas id=canvas_for_clickings
         width=600 height=500
         onmousedown = "on_mouse_down( event )">
      </canvas>
   </div>

</body>
</html>


<!--

/*  Below you find an earlier version of on_mouse_down().
    The current version is simpler as it seems that most
    major browsers now support the offsetX and offsetY
    properties.
*/

function on_mouse_down( event )
{
   // Handling mouse events is somewhat complicated as 
   // different browsers have different attributes in the
   // event object. Below we first test if the attributes
   // exist, and then we use them.

   // The following variables will be used to store the
   // coordinates relative to the upper left corner of the canvas.

   var clicked_point_x = 10 ; 
   var clicked_point_y = 10 ;

   if ( event.offsetX && event.offsetY )
   {
      // Safari, IE, Chrome, and Opera have the offsetX
      // and offsetY attributes.

      clicked_point_x = event.offsetX ;
      clicked_point_y = event.offsetY ;
   }
   else if ( event.clientX && event.clientY )
   {
      // Safari and Firefox have clientX and clientY attributes.
      // It seems that this "else if" block is needed only because
      // of Firefox.

      var canvas = event.target ;

      clicked_point_x = event.clientX - canvas.offsetLeft ;
      clicked_point_y = event.clientY - canvas.offsetTop ; 
   }

   // console.log( " XXX " ) ;

   // With the push() method we add new elements to the end
   // of the two arrays.

   x_coordinates_of_clickings.push( clicked_point_x ) ;
   y_coordinates_of_clickings.push( clicked_point_y ) ;

   draw_on_canvas() ;   // This call updates the screen.
}


-->


